<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>NexusNet Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .section { border: 1px solid #ddd; margin: 20px 0; padding: 20px; border-radius: 8px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        button { padding: 10px 20px; margin: 10px 5px; border: none; border-radius: 4px; cursor: pointer; }
        .primary { background: #007bff; color: white; }
        .danger { background: #dc3545; color: white; }
        .success { background: #28a745; color: white; }
        input, textarea { width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ddd; border-radius: 4px; }
        .status { padding: 10px; border-radius: 4px; margin: 10px 0; }
        .status.online { background: #d4edda; color: #155724; }
        .status.offline { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>NexusNet Admin Panel</h1>
    
    <div class="grid">
        <div class="section">
            <h3>System Status</h3>
            <div id="system-status">
                <div class="status online">HiveMind: Online</div>
                <div class="status online">RAG Pipeline: Active</div>
                <div class="status offline">FL Coordinator: Offline</div>
                <div class="status online">TeacherGate: Connected</div>
            </div>
            <button class="primary" onclick="refreshStatus()">Refresh Status</button>
        </div>
        
        <div class="section">
            <h3>API Keys</h3>
            <input type="password" id="openrouter-key" placeholder="OpenRouter API Key">
            <input type="password" id="requesty-key" placeholder="Requesty API Key">
            <button class="primary" onclick="saveKeys()">Save Keys</button>
        </div>
        
        <div class="section">
            <h3>Expert Configuration</h3>
            <select id="expert-select">
                <option value="all">All Experts</option>
                <option value="code">Code Expert</option>
                <option value="medical">Medical Expert</option>
                <option value="legal">Legal Expert</option>
            </select>
            <button class="primary" onclick="configureExpert()">Configure</button>
            <button class="danger" onclick="disableExpert()">Disable</button>
        </div>
        
        <div class="section">
            <h3>Model Management</h3>
            <select id="model-select">
                <option value="cpu">CPU Models</option>
                <option value="gpu">GPU Models</option>
                <option value="colbert">ColBERT Index</option>
            </select>
            <button class="primary" onclick="downloadModel()">Download</button>
            <button class="danger" onclick="unloadModel()">Unload</button>
        </div>
        
        <div class="section">
            <h3>Hardware Profile</h3>
            <div id="hardware-info">
                <p>CPU: 8 cores, 16 threads</p>
                <p>Memory: 32GB available</p>
                <p>GPU: NVIDIA RTX 4090 (24GB)</p>
            </div>
            <button class="primary" onclick="scanHardware()">Rescan Hardware</button>
            <button class="primary" onclick="autoTune()">Auto-tune Settings</button>
        </div>
        
        <div class="section">
            <h3>Federated Learning</h3>
            <input type="text" id="fl-coordinator" placeholder="Coordinator URL">
            <input type="number" id="fl-participants" placeholder="Min Participants" value="2">
            <button class="primary" onclick="startFL()">Start FL Round</button>
            <button class="danger" onclick="stopFL()">Stop FL</button>
        </div>
        
        <div class="section">
            <h3>Data Assimilation</h3>
            <div id="assimilation-stats">
                <p>Samples Collected: 1,247</p>
                <p>Quality Score: 85%</p>
                <p>Ready for Training: No</p>
            </div>
            <button class="primary" onclick="checkReadiness()">Check Readiness</button>
            <button class="success" onclick="triggerTraining()">Trigger Training</button>
        </div>
        
        <div class="section">
            <h3>RAG Inspector</h3>
            <textarea id="test-query" placeholder="Enter test query..."></textarea>
            <button class="primary" onclick="testRAG()">Test RAG Pipeline</button>
            <div id="rag-results"></div>
        </div>
    </div>
    
    <script>
        function refreshStatus() {
            fetch('/admin/status').then(r => r.json()).then(data => {
                console.log('Status:', data);
                // Update status displays
            });
        }
        
        function saveKeys() {
            const keys = {
                openrouter: document.getElementById('openrouter-key').value,
                requesty: document.getElementById('requesty-key').value
            };
            fetch('/admin/keys', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(keys)
            }).then(() => alert('Keys saved'));
        }
        
        function testRAG() {
            const query = document.getElementById('test-query').value;
            fetch('/rag/query', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({prompt: query})
            }).then(r => r.json()).then(data => {
                document.getElementById('rag-results').innerHTML = 
                    '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            });
        }
        
        // Placeholder functions for other buttons
        function configureExpert() { alert('Expert configuration not implemented'); }
        function disableExpert() { alert('Expert disable not implemented'); }
        function downloadModel() { alert('Model download not implemented'); }
        function unloadModel() { alert('Model unload not implemented'); }
        function scanHardware() { alert('Hardware scan not implemented'); }
        function autoTune() { alert('Auto-tune not implemented'); }
        function startFL() { alert('FL start not implemented'); }
        function stopFL() { alert('FL stop not implemented'); }
        function checkReadiness() { alert('Readiness check not implemented'); }
        function triggerTraining() { alert('Training trigger not implemented'); }
    </script>
</body>
</html>